<div class="dashboard-container flex flex-col min-h-screen w-full h-full">
  <app-title-section [title]="'Tableau de bord'"></app-title-section>
  <div class="dashboard-content h-full">

    @if (isLoading() === false) {
    <div class="flex flex-col gap-4 w-full">
      <div class="preview-stats-container flex flex-col mt-8 gap-y-4">
        <div class="preview-stats-title flex justify-between w-full">
          <h2>Chiffre clés</h2>
          <div class="select flex justify-center">
            <!-- <p-select [options]="dateRangeSelectOptions" [(ngModel)]="selectedRange" class="w-full md:w-56"
                (onChange)="updateSelectedRevenueRange()" /> -->
            <app-datepicker [(startDate)]="startDate" (startDateChange)="initDashboard()"></app-datepicker>
          </div>
        </div>
        <div class="preview-stats-cards flex justify-between gap-x-4 gap-y-4 lg:gap-y-0">
          @for(data of dashboardStatsData(); track data.label) {
          <app-dashboard-card 
            class="dashboard-card" 
            [label]="data.label" 
            [stat]="data.value"
            [iconPath]="data.iconPath"
            [key]="data.key"
            [filterRangeDays]="filterRangeDays()"
            >
          </app-dashboard-card>
          }
        </div>
      </div>
      <div class="preview-bookings-container flex flex-col mt-8 gap-y-4">
        <div class="preview-bookings-title flex justify-between w-full">
          <h2>Réservation à venir</h2>
          <div class="select flex justify-center">
            <!-- <p-select [options]="dateRangeSelectOptions" [(ngModel)]="selectedRange" class="w-full md:w-56"
                (onChange)="updateSelectedRevenueRange()" /> -->
          </div>
        </div>
        <div class="preview-bookings-table flex flex-col gap-x-4">
          <app-dashboard-table [bookings]="dashboardTableData()" class="hidden lg:block"></app-dashboard-table>
          <app-dashboard-table-card [bookings]="dashboardTableData()" class="lg:hidden"></app-dashboard-table-card>
        </div>
      </div>

    </div>
    } @else {
    <!-- Loading -->
    <div class="loading-spinner flex justify-center">
      <p-progress-spinner strokeWidth="8" fill="transparent" animationDuration=".5s" class="progress-spinner" />
    </div>
    }
  </div>